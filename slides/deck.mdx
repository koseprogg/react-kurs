import { Image, Notes, Head } from "mdx-deck";
import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import {
  vsDark as classTheme,
  nightOwl as hooksTheme,
  oceanicNext as oceanicTheme,
} from "@code-surfer/themes";
import { highlight } from "@mdx-deck/themes";

import GreetingLoader from "./src/greeting-loader";
import Layout from "./components/Layout"
import AppLoader from "./src/app-loader";

export const theme = {
  ...oceanicTheme,
  ...highlight,
};

<Head>
  <title>Nybegynerkurs i React</title>
</Head>

---

# Agenda

---

<Layout>

## Første del

- Gå kjapt gjennom HTML/CSS/JavaScript
- Grunnleggende konsepter i React
- Oppsett av en enkel React-app
- Lagre tilstand i appen
- Flere konsepter i React/JavaScript

</Layout>

---

<Layout>

## Andre del

- Bruk av pakker i React/NPM
- Bruk av komponentrammeverk
- Visualisering med grafer
- Routing og undersider
- SinglePageApplication

</Layout>

---

<Layout>

## Tredje del

- Deploye nettside
- Eksempler på andre mulige prosjekter
- Hvordan komme i gang med react

</Layout>

---

<CodeSurferColumns>

<Step title="Vi ser på noe enkel HTML, som er skjellet av alle nettsider">

```html file=./src/index.html

```

HTML er representert i en tre-struktur, her ser vi at `<html>` er det øverste elementet i
_dokument-treet_. `<html>` har `<head>` og `<body>` som barn.

</Step>
</CodeSurferColumns>

---

<CodeSurferColumns>

<Step
title="Enkelt forklart består HTML av blokker som en åpner med <> og lukker med </>"
subtitle="Her åpner og lukker vi <html> som alltid er den ytterste blokken">

```html 1,15 file=./src/index.html

```

</Step>

<Step title="Vi har alltid en head seksjon">

```html 2,4 file=./src/index.html

```

</Step>

<Step title="og head sitt innhold">

```html 3 file=./src/index.html

```

</Step>

<Step title="Videre har vi alltid en body seksjon">

```html 5,14 file=./src/index.html

```

</Step>

<Step title="og body sitt innhold">

```html 6:13 file=./src/index.html

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns sizes={[1, 2]}>

<Step title="Så med litt css gir vi h1 og h2 litt farge">

```html 7,8 file=./src/index2.html

```

```css 1:7 file=./src/style.css

```

</Step>

<Step title="Og gir de to seksjonene våre navn kan vi også gi de litt style">

```html 6,10 file=./src/index2.html

```

```css 9:17 file=./src/style.css

```

</Step>

</CodeSurferColumns>

---

## Så, hvordan er dette relatert til React?

---

React er er JavaScript bibliotek for å lage brukergrensesnitt, hovedsakelig med HTML.

Med React skriver vi ikke vanlig JavaScript, men et
superset som heter **JSX**. Dette ser ut som en blanding
av html og JavaScript.

```jsx
ReactDOM.render(
  <HelloMessage name="Taylor" />,
  document.getElementById("hello-example")
);
```

---

<CodeSurferColumns>
<Step title="En eksempel på JSX" subtitle="Men nettleseren skjønner ikke jsx, bare vanlig HTML og
JavaScript">

```jsx
return (
  <div className="shopping-list">
    <h1>Shopping List for {props.name}</h1>
    <ul>
      <li>Instagram</li>
      <li>WhatsApp</li>
      <li>Oculus</li>
    </ul>
  </div>
);
```

```js
.
```

</Step>
<Step subtitle="JSX koden blir til vanlig JavaScript som kjøres i nettleseren!">

```jsx
return (
  <div className="shopping-list">
    <h1>Shopping List for {props.name}</h1>
    <ul>
      <li>Instagram</li>
      <li>WhatsApp</li>
      <li>Oculus</li>
    </ul>
  </div>
);
```

```js
return React.createElement(
  "div",
  { className: "shopping-list" },
  React.createElement("h1" /* ... h1 children ... */),
  React.createElement("ul" /* ... ul children ... */)
);
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>
<Step>

```jsx
const element = <div tabIndex="0"></div>;
```

Med JSX kan vi skrive _JSX tags_ inne i JS koden vår. Det kan være html elementer, eller
React komponenter (som vi kommer tibake til).

</Step>

<Step>

```jsx
const element = <img src={user.avatarUrl}></img>;
```

Inne i jsx kode kan vi også skrive vanlig JS ved å sette det inni curly brackets.

</Step>
</CodeSurferColumns>

---

Men, vi har fortsatt bare JS, og ikke noe HTML!

---

De aller fleste React apper har denne koden:

```js
ReactDOM.render(App, document.getElementById("root"));
```

Når denne konden kjører vil React bruke kjøre JS funksjoner som genererer og endrer på html dokumentet (DOMen) på siden vår.
([demo](https://reactjs.org/redirect-to-codepen/rendering-elements/update-rendered-element))

Vi sier at vi _rendrer_ appen vår.

---

Som vi så, så vil ikke hele html dokumentet rendres på nytt hvert tick, men kun det som er endret i
"React treet" vårt. Det hadde vært utrolig tregt å skrive all html på nytt hver gang det skjedde en
liten endring, så React er smart, og ender kun det den trenger i html dokumentet.

> Dette gjør den vha. en såkalt virtuell DOM. Det er ikke viktig akkurat hvordan dette fungerer.

---

## Komponenter

Det mest sentrale konseptet i React (og de fleste UI rammeverk). Komponenter lar oss dele opp Appen
vår i små, gjenbrukbare deler.

---

<CodeSurfer>

```jsx title="Et enkelt eksempel på en komponent" subtitle="Den enkleste komponenten er bare en funksjon"
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

```jsx title="Et enkelt eksempel på en komponent"  subtitle="Kan også skrives i ES6 syntax (anbefalt)"
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

const Welcome = (props) => {
  return <h1>Hello, {props.name}</h1>;
};
```

```jsx subtitle="Nå kan vi bruke Welcome komponenten vår hvor som helst!"
const App = () => {
  return (
    <div>
      <Welcome name="Peder">
      <Welcome name="Magnus">
    </div>
  );
}
```

```diff 3,4 subtitle="Legg merke til at inebygde komponenter skrives som vanilg HTML, mens React komponenter defineres med stor forbokstav"

```

</CodeSurfer>

---

<CodeSurferColumns>

<Step title="La oss begynne å lage en liten app som viser litt eksempler">

```jsx 1:14 file=./src/App.1.1.js

```

<AppLoader />

</Step>

<Step title="Importerer vi React, samt litt `CSS` koden så eksempelet blir litt fint">

```jsx 1,2 file=./src/App.1.1.js

```

<AppLoader />

</Step>

<Step title="Så definerer vi en funksjon som retunerer JSX">

```jsx 4:12 file=./src/App.1.1.js

```

<AppLoader />

</Step>

<Step subtitle="...og dette lager komponenten vi ser på siden">

```jsx file=./src/App.1.1.js

```

<AppLoader version="1.1" />

</Step>

<Step title="Men så trenger vi noen `chats` i dette chatterommet da">

```jsx file=./src/App.1.2.js

```

<AppLoader version="1.2" />

</Step>

<Step title="også trenger vi et svar fra Ludvig">

```jsx file=./src/App.1.3.js

```

<AppLoader version="1.3" />

</Step>

<Step title="og Magnus">

```jsx file=./src/App.1.4.js

```

<AppLoader version="1.4" />

</Step>

<Step title="og kanskje jeg svarer igjen?">

```jsx file=./src/App.1.5.js

```

<AppLoader version="1.5" />

</Step>

<Step title="Men hva synes vi egentlig om dette?" subtitle="Er dette god og gjennbrukbar kode?">

```jsx file=./src/App.1.5.js

```

<AppLoader version="1.5" />

</Step>

<Step title="Kanskje dette kunne vært en komponent, så vi kan bruke headern vår flere ganger?">

```jsx 7:9 file=./src/App.1.5.js

```

<AppLoader version="1.5" />

</Step>

<Step title="Og hva med dette? Dette ser ut som noe som burde vært en loop fra ITGK?">

```jsx 10:29 file=./src/App.1.5.js

```

<AppLoader version="1.5" />

</Step>

<Step title="Så la oss lage en kompoent av headern">

```jsx file=./src/App.1.6.js

```

<AppLoader version="1.6" />

</Step>

<Step title="og vi setter inn <Header /> komponenten vår">

```jsx file=./src/App.1.7.js

```

<AppLoader version="1.7" />

</Step>

<Step title="Men før vi ser på meldigene, la oss see litt nærmere på dette her!">

```jsx 4:10,15 file=./src/App.1.7.js

```

<AppLoader version="1.7" />

</Step>

<Step title="Så la oss glemme meldinger litt, og bare fokusere på <Header />">

```jsx file=./src/App.1.8.js

```

<AppLoader version="1.8" />

</Step>

<Step title="Hvis vi skal bruke denne <Header /> kompoenenten overalt så vil vi kanskje at den skal være dynamisk?" subtitle="Vi vil kanskje at denne teksten sier noe annet per side?">

```jsx 7 file=./src/App.1.8.js

```

<AppLoader version="1.8" />

</Step>

<Step title="Da må vi huske tilbake til i stad da vi snakket om props">

```jsx file=./src/App.1.9.js

```

<AppLoader version="1.9" />

</Step>

<Step title="Sender inn teksten til komponenten litt som en funksjon">

```jsx file=./src/App.1.10.js

```

<AppLoader version="1.10" />

</Step>

<Step title="Og vi kan enkelt lage mange headers, hvis vi vil dette da :)">

```jsx file=./src/App.1.11.js

```

<AppLoader version="1.11" />

</Step>

</CodeSurferColumns>
